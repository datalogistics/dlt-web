<h2 class="lead text-center">Depot Status</h2>

<div class="table-responsive">
  <table class="table table-hover table-condensed">
    <tr>
      <th>Status</th>
      <th>Access Point</th>
      <th>Time to Live</th>
      <th>Last Seen</th>
      <th>Institution</th>
      <th>Location</th>
      <th>Data Charts</th>
    </tr>
    <input type="text" class="form-control" ng-model="q.accessPoint" placeholder="Filter by service access point..." />
    <tbody ng-repeat="service in services | filter:q:strict | orderBy:'-ts' | unique:'accessPoint'">
      <td>
        <button ng-show="service.status === 'ON'" class="btn btn-success disabled">ON</button>
        <button ng-show="service.status === 'Unknown'" class="btn btn-warning disabled">Unknown</button>
        <button ng-show="service.status === 'New'" class="btn btn-info disabled">New</button>
        <button ng-show="service.status === undefined || service.status === 'OFF'" class="btn btn-danger disabled">OFF</button>
      </td>
      <td>{{ service.accessPoint || service.serviceType }}</td>
      <td>{{ service.ttl }}</td>
      <td>{{ service.ts / 1000 | date:'yyyy-MM-dd HH:mm:ss' }}</td>
      <td>{{service.location.institution}}</td>
      <td><button ng-click="showMap(service.id)" class="btn btn-info">{{service.location.city}} {{service.location.state}}</button></td>
      <td ng-repeat="metadata in getServiceMetadata(service)">
	<button ng-click="showData(metadata)" class="btn btn-info">{{getMetadataShortET(metadata,service)}}</button></td>
    </tbody>
  </table>
</div>
