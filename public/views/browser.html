<h2 class="lead text-center">EODN/IDMS Exnode Browser</h2>
<div class="table-responsive" style="max-width: 1024px; margin-left: auto; margin-right: auto";>
    <div>
        <tabset>
            <tab heading="Exnode Browser" ng-controller="ExnodeController">
                <div class="row top5">
                    <div class="col-md-6 tree-browser">
                        <!-- <js-tree tree-events="select_node:nodeSelected" tree-data="json" tree-src="/views/filetree.json"  tree-plugins="checkbox"></js-tree> -->
                        <js-tree tree-events="select_node:nodeSelected"
                                 tree-ajax="/api/fileTree"></js-tree>
                    </div>
                    <div class="col-md-6 file-viewer">
                        <pre>
                            <code>{{fileViewer}}</code>
                        </pre>
                        <span ng-if='showDownload'>
                            <button ng-click="downloadFile()" class="btn btn-info">Download</button>
                        </span>
                    </div>
                </div>
            </tab>
            <tab heading="Exnode Search"  ng-controller="DltFormController">
                <form class="form-horizontal top5" id="searchForm" ng-submit="searchExnodes()">
                    <div class="form-group"  ng-repeat="field in fieldArr">
                        <div class="col-sm-1">
                            <center>
                                <button ng-click="removeField(field.id)"
                                        type="button" class="btn btn-default">X</button>
                            </center>
                        </div>
                        <div class="col-sm-5">
                            <select class="form-control searchField" ng-model="selected">
                                <option ng-repeat="fld in exFields" ng-value="field.name=fld.name"
                                        value="fld.name">
                                    {{fld.name}}
                                </option>                              
                            </select>
                        </div>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" name="searchValue"
                                   ng-value="field.value"
                                   placeholder="Enter a search query">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-6">
                        </div>
                        <div class="col-sm-2">
                            <button ng-click="addField()"
                                    type="button" class="btn btn-default">Add Field</button>
                        </div>
                        <div class="col-sm-2">
                            <button type="submit" class="btn btn-default">Search</button>
                        </div>
                    </div>
                </form>
                <div class="row">
                    <div class="col-md-6 tree-browser">
                        <div ng-if="searchRes">
                            <div class="row" ng-repeat="rows in searchRes">
                                <a id="" ng-click="showInfo()" class="jstree-anchor">
                                    <i role="presentation" 
                                       class="searchfile jstree-icon jstree-themeicon jstree-themeicon-custom"></i>
                                    {{rows.name}}</a>
                            </div>
                        </div>
                        <div ng-if="!searchRes && isSearched">
                            No Results
                        </div>
                    </div>
                    <div class="col-md-6 file-viewer">
                        <pre>
                            <code>{{fileInfo}}</code>
                        </pre>
                    </div>

                </div>  
            </tab>     
            <tab heading="DLT Search"  ng-controller="DltFormController">
                <form class="form-horizontal top5" ng-submit="submitUsgsForm()">
                    <div class="row">
                        <div class="col-md-4">
                            <div> Sensor name </div>
                            <select class="form-control searchField" ng-model="usgsform.sensorName">
                                <option ng-repeat="(key, value) in sensorNames" ng-value="key"
                                        value="{{key}}">
                                    {{value}}
                                </option>                              
                            </select>
                        </div>
                        <div class="col-md-4">
                            <div>Start date </div>
                            <p class="input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="usgsform.startDate" is-open="opened" 
                                       max-date="'2015-06-22'" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </p>
                        </div>
                        <div class="col-md-4">
                            <div> End date</div>
                            <p class="input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="usgsform.endDate" is-open="opened2" 
                                       max-date="'2015-06-22'" datepicker-options="dateOptions" ng-required="true" close-text="Close" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open2($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                                </span>
                            </p>
                        </div>                    
                    </div>
                    <div class="row">                    
                        <div class="col-md-4">
                            <div>Cloud cover</div>
                            <slider ng-model="usgsform.cloud" min="testOptions.min" step="testOptions.step" max="testOptions.max" value="testOptions.value"></slider>
                        </div>                                
                        <div class="col-md-4">
                            <div class="btn-group">
                                <label class="btn btn-primary" ng-model="usgsform.searchModel" btn-radio="'row'">Row/Path </label>
                                <label class="btn btn-primary" ng-model="usgsform.searchModel" btn-radio="'latlong'">Latitude/Longitude</label>
                            </div>
                        </div>
                    </div>
                    <div ng-if="usgsform.searchModel == 'latlong'" class="row top10">
                        <div class="col-md-1">
                            Latitude
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.latStart" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.latEnd" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">                        
                        </div>
                        <div class="col-md-1">
                            Longitude
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.longStart" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.longEnd" class="form-control">
                        </div>
                    </div>
                    <div ng-if="usgsform.searchModel == 'row'" class="row top10">
                        <div class="col-md-1">
                            WRS Path
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.pathStart" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.pathEnd" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">                        
                        </div>
                        <div class="col-md-1">
                            WRS Row
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.rowStart" class="form-control">
                        </div>
                        <div class="col-md-2 form-group">
                            <input type="number" ng-model="usgsform.rowEnd" class="form-control">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <input type="submit" class="btn btn-primary" value="Search"/>
                        </div>                    
                    </div>                    
                    <div class="row top10" ng-if="isUsgsLoading">
                        <div class="col-xs-5" style=" padding: 10px; height: 300px;background-color: rgba(200,200,200,0.3);">
                            <div class="loader"></div>
                        </div>
                    </div>
                    <div class="row top10" ng-if="usgsSearchRes && !isUsgsLoading ">
                        <div class="col-md-6 tree-browser">
                            <div>
                                <div class="row" ng-repeat="(name,rows) in usgsSearchRes">
                                    <a id="" ng-click="showInfo()" class="jstree-anchor">
                                        <i role="presentation" 
                                           class="searchfile jstree-icon jstree-themeicon jstree-themeicon-custom"></i>
                                        {{rows.name}}</a>
                                    <div ng-if="rows.isPresentInExnode">This Exists in exnode ...</div>
                                    
                                </div>
                            </div>
                            <div ng-if="!usgsSearchRes && isUsgsSearched">
                                No Results
                            </div>
                        </div>
                        <div class="col-md-6 file-viewer">
                            <pre>
                                <code>{{fileInfo}}</code>
                            </pre>
                        </div>

                    </div>  
                </form>
            </tab>              
        </tabset>                    
    </div>
</div>
